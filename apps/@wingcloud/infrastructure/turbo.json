{
  "$schema": "https://turborepo.org/schema.json",
  "extends": [
    "//"
  ],
  "pipeline": {
    "terraformInit": {
      "inputs": [
        "package.json"
      ],
      "outputs": [
        "target/main.tfaws/.terraform/**",
        "target/main.tfaws/.terraform.lock.hcl"
      ]
    },
    "compile": {
      "dependsOn": [
        "^compile",
        "terraformInit"
      ],
      "dotEnv": [
        ".env"
      ],
      "outputs": [
        "target/main.tfaws/**",
        "!target/main.tfaws/.terraform.lock.hcl",
        "!target/main.tfaws/.terraform/**",
        "!target/main.tfaws/terraform.tfstate",
        "!target/main.tfaws/terraform.tfstate.backup",
        "!target/main.tfaws/tfplan"
      ]
    },
    "plan": {
      "dependsOn": [
        "compile"
      ],
      "cache": false
    },
    "deploy": {
      "dependsOn": [
        "plan"
      ],
      "cache": false
    },
    "dev": {
      "dependsOn": [
        "^compile"
      ]
    },
    "test": {
      "dependsOn": [
        "compile"
      ]
    },
    "test-aws": {
      "dependsOn": [
        "compile"
      ]
    }
  }
}
